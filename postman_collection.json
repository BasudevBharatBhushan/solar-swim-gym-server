{
    "info": {
        "_postman_id": "a2b3c4d5-e6f7-48a9-bc0d-1e2f3a4b5c6d",
        "name": "Solar Swim Gym API",
        "description": "Comprehensive API collection for Solar Swim Gym Backend II. Includes Auth, Locations, Config, Services, Pricing, Membership, CRM, and Billing.",
        "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
    },
    "item": [
        {
            "name": "Auth",
            "item": [
                {
                    "name": "Staff Login",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"superadmin@solar.com\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/auth/staff/login",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "auth",
                                "staff",
                                "login"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get All Staff",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/auth/staff/all",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "auth",
                                "staff",
                                "all"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "User Register (Complex)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"primary_profile\": {\n        \"first_name\": \"John\",\n        \"last_name\": \"Doe\",\n        \"email\": \"john.doe.{{$timestamp}}@example.com\",\n        \"date_of_birth\": \"1990-01-01\",\n        \"emergency_contact_name\": \"Jane Doe\",\n        \"emergency_contact_phone\": \"555-0199\",\n        \"waiver_program_id\": \"{{lastWaiverId}}\",\n        \"case_manager_name\": \"Manager Name\",\n        \"case_manager_email\": \"manager@example.com\"\n    },\n    \"family_members\": [\n        {\n            \"first_name\": \"Jimmy\",\n            \"last_name\": \"Doe\",\n            \"date_of_birth\": \"2015-05-05\",\n            \"waiver_program_id\": null\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/auth/user/register",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "auth",
                                "user",
                                "register"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Validate Activation Token",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/auth/user/activate?token={{activationToken}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "auth",
                                "user",
                                "activate"
                            ],
                            "query": [
                                {
                                    "key": "token",
                                    "value": "{{activationToken}}"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "User Activate",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"token\": \"{{activationToken}}\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/auth/user/activate",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "auth",
                                "user",
                                "activate"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "User Login",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"email\": \"user@example.com\",\n    \"password\": \"password123\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/auth/user/login",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "auth",
                                "user",
                                "login"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Locations",
            "item": [
                {
                    "name": "Get All Locations",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/locations",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "locations"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Location",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Downtown Branch\",\n    \"address\": \"123 Main St, City\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/locations",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "locations"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Configuration",
            "item": [
                {
                    "name": "Get Email Config",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/email-config",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "email-config"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Email Config",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"smtp_host\": \"smtp.gmail.com\",\n    \"smtp_port\": 587,\n    \"sender_email\": \"admin@solar.com\",\n    \"sender_name\": \"Solar Swim Gym\",\n    \"smtp_username\": \"apikey\",\n    \"smtp_password\": \"securepassword\",\n    \"is_secure\": true,\n    \"is_active\": true\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/email-config",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "email-config"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Age Groups",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/config/age-groups",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "age-groups"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Age Group",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Adult\",\n    \"min_age\": 18.5,\n    \"max_age\": 65.5\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/age-groups",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "age-groups"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Age Group (Upsert)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"age_group_id\": \"{{lastAgeGroupId}}\",\n    \"name\": \"Adult Updated\",\n    \"min_age\": 19,\n    \"max_age\": 65\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/age-groups",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "age-groups"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Subscription Terms",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/config/subscription-terms",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "subscription-terms"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Subscription Term (Recurring)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Monthly\",\n    \"duration_months\": 1,\n    \"payment_mode\": \"RECURRING\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/subscription-terms",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "subscription-terms"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Subscription Term (Pay In Full)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Annual\",\n    \"duration_months\": 12,\n    \"payment_mode\": \"PAY_IN_FULL\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/subscription-terms",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "subscription-terms"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Subscription Term (Upsert)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"subscription_term_id\": \"{{lastTermId}}\",\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Monthly Updated\",\n    \"duration_months\": 1,\n    \"payment_mode\": \"RECURRING\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/subscription-terms",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "subscription-terms"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Waiver Programs",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/config/waiver-programs",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "waiver-programs"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Waiver Program",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Standard Liability Waiver\",\n    \"description\": \"Full waiver details...\",\n    \"code\": \"SLW-001\",\n    \"requires_case_manager\": false\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/waiver-programs",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "waiver-programs"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Waiver Program (Upsert)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"waiver_program_id\": \"{{lastWaiverId}}\",\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Standard Liability Waiver Updated\",\n    \"description\": \"Updated details...\",\n    \"code\": \"SLW-001\",\n    \"requires_case_manager\": true\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/config/waiver-programs",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "config",
                                "waiver-programs"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Pricing",
            "item": [
                {
                    "name": "Get Base Plan",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/base-prices",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "base-prices"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Base Plan",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"prices\": [\n        {\n            \"name\": \"Standard Monthly Fee\",\n            \"role\": \"PRIMARY\",\n            \"age_group_id\": \"{{lastAgeGroupId}}\",\n            \"subscription_term_id\": \"{{lastTermId}}\",\n            \"price\": 29.99\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/base-prices",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "base-prices"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Membership Services",
            "item": [
                {
                    "name": "Get Membership Services by Owner",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/membership-services/{{ownerId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "membership-services",
                                "{{ownerId}}"
                            ]
                        }
                    },
                    "description": "Fetch membership services for a specific owner (Base Price ID or Category ID)",
                    "response": []
                },
                {
                    "name": "Upsert Membership Service",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "[\n    {\n        \"service_id\": \"{{lastServiceId}}\",\n        \"membership_program_id\": \"{{ownerId}}\",\n        \"is_included\": true,\n        \"usage_limit\": \"5 sessions\"\n    }\n]",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/membership-services/upsert",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "membership-services",
                                "upsert"
                            ]
                        }
                    },
                    "description": "Upsert services. 'membership_program_id' acts as a generic parent ID.\n\n- If ID is a **Category**: Services are linked directly to that category.\n- If ID is a **Base Price**: The system resolves its components (Location, Role, Age Group) and links services to that *profile*. This means services are **SHARED** across all subscription terms for that base plan.\n\nExample: Adding a service to 'Adult Primary (Monthly)' automatically adds it to 'Adult Primary (Annual)'.",
                    "response": []
                }
            ]
        },
        {
            "name": "Services",
            "item": [
                {
                    "name": "Get All Services",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/services",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "services"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Service (With Pricing)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Swimming Lesson\",\n    \"description\": \"Group swimming lesson for beginners\",\n    \"service_type\": \"class\",\n    \"is_addon_only\": false\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/services",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "services"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Service (Upsert)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"service_id\": \"{{lastServiceId}}\",\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Swimming Lesson Updated\",\n    \"description\": \"Updated description\",\n    \"service_type\": \"class\",\n    \"is_addon_only\": false\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/services",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "services"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Service Packs",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/services/{{lastServiceId}}/service-packs",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "services",
                                "{{lastServiceId}}",
                                "service-packs"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Service Pack Prices",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/service-packs/{{servicePackId}}/prices",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "service-packs",
                                "{{servicePackId}}",
                                "prices"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Service Pack",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"service_id\": \"{{lastServiceId}}\",\n    \"name\": \"10 Class Pack\",\n    \"description\": \"Standard 10 classes\",\n    \"classes\": 10,\n    \"duration_months\": 3\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/service-packs/upsert",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "service-packs",
                                "upsert"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Service Price",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"service_pack_id\": \"{{lastServicePackId}}\",\n    \"age_group_id\": \"{{lastAgeGroupId}}\",\n    \"price\": 150.00\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/service-packs/prices/upsert",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "service-packs",
                                "prices",
                                "upsert"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upload Service Image",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "formdata",
                            "formdata": [
                                {
                                    "key": "image",
                                    "type": "file",
                                    "src": []
                                }
                            ]
                        },
                        "url": {
                            "raw": "{{baseUrl}}/services/{{lastServiceId}}/image",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "services",
                                "{{lastServiceId}}",
                                "image"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Memberships",
            "item": [
                {
                    "name": "Get Memberships",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/memberships",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "memberships"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Membership",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Gold Access Plan\",\n    \"categories\": [\n        {\n            \"name\": \"Individual\",\n            \"fees\": [\n                {\n                    \"fee_type\": \"JOINING\",\n                    \"billing_cycle\": \"ONE_TIME\",\n                    \"amount\": 100.00\n                }\n            ],\n            \"rules\": [\n                {\n                    \"priority\": 1,\n                    \"result\": \"ALLOW\",\n                    \"message\": \"Adult Policy\",\n                    \"condition_json\": {\n                        \"minAdult\": 1,\n                        \"maxAdult\": 1\n                    }\n                }\n            ]\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/memberships",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "memberships"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Update Membership (Upsert)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"membership_program_id\": \"{{lastMembershipProgramId}}\",\n    \"location_id\": \"{{lastLocationId}}\",\n    \"name\": \"Gold Access Plan Updated\",\n    \"categories\": [\n        {\n            \"name\": \"Individual\",\n            \"fees\": [\n                {\n                    \"fee_type\": \"JOINING\",\n                    \"billing_cycle\": \"ONE_TIME\",\n                    \"amount\": 90.00\n                }\n            ],\n            \"rules\": [\n                {\n                    \"priority\": 1,\n                    \"result\": \"ALLOW\",\n                    \"message\": \"Adult Policy\",\n                    \"condition_json\": {\n                        \"minAdult\": 1,\n                        \"maxAdult\": 1\n                    }\n                }\n            ]\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/memberships",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "memberships"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Billing & Subscriptions",
            "item": [
                {
                    "name": "Create Subscription",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"account_id\": \"{{lastAccountId}}\",\n    \"location_id\": \"{{lastLocationId}}\",\n    \"subscription_type\": \"BASE\",\n    \"reference_id\": \"{{lastTermId}}\",\n    \"subscription_term_id\": \"{{lastTermId}}\",\n    \"unit_price_snapshot\": 29.99,\n    \"total_amount\": 29.99,\n    \"billing_period_start\": \"2024-02-01\",\n    \"billing_period_end\": \"2024-03-01\",\n    \"coverage\": [\n        {\n            \"profile_id\": \"{{lastProfileId}}\",\n            \"role\": \"PRIMARY\",\n            \"exempt\": false\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/billing/subscriptions",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "billing",
                                "subscriptions"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Account Subscriptions",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/billing/accounts/{{lastAccountId}}/subscriptions",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "billing",
                                "accounts",
                                "{{lastAccountId}}",
                                "subscriptions"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "CRM",
            "item": [
                {
                    "name": "Get Leads",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/leads",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "leads"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Search Leads",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/leads/search?q=test",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "leads",
                                "search"
                            ],
                            "query": [
                                {
                                    "key": "q",
                                    "value": "test"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Lead",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"first_name\": \"Jane\",\n    \"last_name\": \"Smith\",\n    \"email\": \"jane.smith@example.com\",\n    \"phone\": \"555-0100\",\n    \"message\": \"Interested in swimming lessons\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/leads",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "leads"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Reindex Leads",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/leads/reindex",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "leads",
                                "reindex"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Accounts",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/accounts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "accounts"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Search Accounts",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/accounts/search?q=test",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "accounts",
                                "search"
                            ],
                            "query": [
                                {
                                    "key": "q",
                                    "value": "test"
                                }
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Reindex All (Cron)",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/cron/reindex-all",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "cron",
                                "reindex-all"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Account (Complex)",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"account_id\": \"{{lastAccountId}}\",\n    \"location_id\": \"{{lastLocationId}}\",\n    \"primary_profile\": {\n        \"first_name\": \"Mike\",\n        \"last_name\": \"Johnson\",\n        \"email\": \"mike.j@example.com\",\n        \"date_of_birth\": \"1985-05-15\",\n        \"waiver_program_id\": \"{{lastWaiverId}}\"\n    },\n    \"family_members\": [\n        {\n            \"first_name\": \"Lily\",\n            \"last_name\": \"Johnson\",\n            \"date_of_birth\": \"2015-08-20\"\n        }\n    ]\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/accounts/upsert",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "accounts",
                                "upsert"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Account by ID (With Profiles)",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/accounts/{{lastAccountId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "accounts",
                                "{{lastAccountId}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Get Profile by ID",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/profiles/{{lastProfileId}}",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "profiles",
                                "{{lastProfileId}}"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Reindex Accounts",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/accounts/reindex",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "accounts",
                                "reindex"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Sessions",
            "item": [
                {
                    "name": "Get Sessions",
                    "request": {
                        "method": "GET",
                        "header": [],
                        "url": {
                            "raw": "{{baseUrl}}/sessions",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "sessions"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Upsert Session",
                    "request": {
                        "method": "POST",
                        "header": [],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"name\": \"Summer 2026\",\n    \"start_date\": \"2026-06-01\",\n    \"expiry_date\": \"2026-08-31\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/sessions/upsert",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "sessions",
                                "upsert"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        },
        {
            "name": "Discounts",
            "item": [
                {
                    "name": "Get Discount Codes",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/discounts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "discounts"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Create Discount Code",
                    "request": {
                        "method": "POST",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "body": {
                            "mode": "raw",
                            "raw": "{\n    \"discount_code\": \"WINTER6\",\n    \"discount\": \"6%\",\n    \"staff_name\": \"John Doe\"\n}",
                            "options": {
                                "raw": {
                                    "language": "json"
                                }
                            }
                        },
                        "url": {
                            "raw": "{{baseUrl}}/discounts",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "discounts"
                            ]
                        }
                    },
                    "response": []
                },
                {
                    "name": "Validate Discount Code",
                    "request": {
                        "method": "GET",
                        "header": [
                            {
                                "key": "x-location-id",
                                "value": "{{lastLocationId}}",
                                "type": "text"
                            }
                        ],
                        "url": {
                            "raw": "{{baseUrl}}/discounts/validate/WINTER6",
                            "host": [
                                "{{baseUrl}}"
                            ],
                            "path": [
                                "discounts",
                                "validate",
                                "WINTER6"
                            ]
                        }
                    },
                    "response": []
                }
            ]
        }
    ],
    "auth": {
        "type": "bearer",
        "bearer": [
            {
                "key": "token",
                "value": "{{token}}",
                "type": "string"
            }
        ]
    },
    "event": [
        {
            "listen": "test",
            "script": {
                "type": "text/javascript",
                "exec": [
                    "if (pm.response.code === 200 || pm.response.code === 201) {",
                    "    const jsonData = pm.response.json();",
                    "    if (jsonData.token) pm.environment.set(\"token\", jsonData.token);",
                    "    if (jsonData.location_id) pm.environment.set(\"lastLocationId\", jsonData.location_id);",
                    "    if (jsonData.activation_token) pm.environment.set(\"activationToken\", jsonData.activation_token);",
                    "    if (jsonData.age_group_id) pm.environment.set(\"lastAgeGroupId\", jsonData.age_group_id);",
                    "    if (jsonData.subscription_term_id) pm.environment.set(\"lastTermId\", jsonData.subscription_term_id);",
                    "    if (jsonData.waiver_program_id) pm.environment.set(\"lastWaiverId\", jsonData.waiver_program_id);",
                    "    if (jsonData.service_id) pm.environment.set(\"lastServiceId\", jsonData.service_id);",
                    "    if (jsonData.base_price_id) pm.environment.set(\"lastBasePriceId\", jsonData.base_price_id);",
                    "    if (jsonData.prices && jsonData.prices.length > 0) pm.environment.set(\"lastBasePriceId\", jsonData.prices[0].base_price_id);",
                    "    if (jsonData.membership_program_id) pm.environment.set(\"lastMembershipProgramId\", jsonData.membership_program_id);",
                    "    if (jsonData.account_id) pm.environment.set(\"lastAccountId\", jsonData.account_id);",
                    "    if (jsonData.profile_id) pm.environment.set(\"lastProfileId\", jsonData.profile_id);",
                    "}"
                ]
            }
        }
    ],
    "variable": [
        {
            "key": "baseUrl",
            "value": "http://localhost:3001/api/v1",
            "type": "string"
        },
        {
            "key": "token",
            "value": "",
            "type": "string"
        },
        {
            "key": "lastLocationId",
            "value": "",
            "type": "string"
        }
    ]
}